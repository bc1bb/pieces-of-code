pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	p={x=60,y=110,hp=10}
	bullets={}
	enn={}
	enn_b={}
end

function _update60()
 if (btn(➡️) and p.x<120) p.x+=1
 if (btn(⬅️) and p.x>0) p.x-=1
 if (btn(⬆️) and p.y>0) p.y-=1
 if (btn(⬇️) and p.y<120) p.y+=1
	if (btnp(❎)) shoot()
	
	update_bullets()
	e_spawn()
	update_e()
end

function _draw()
	cls()

	spr(1,p.x,p.y)
	
	for i in all(bullets) do
		spr(17,i.x,i.y)
	end
	for i in all(enn_b) do
		spr(18,i.x,i.y)
	end
	for i in all(enn) do
		spr(2,i.x,i.y)
	end
end
-->8
-- player bullets --

function shoot()
  b = {
			x=p.x,
			y=p.y
		}
	add(bullets, b)
	sfx(0)
end

function update_bullets()
	for b in all(bullets) do
		b.y-=1
	end
end
-->8
-- ennemies --

function e_spawn()
 if time() % 5 then
		new_enn = {
				x=rnd(110),
				y=rnd(30)
			}
		add(enn, new_enn)
		
		e_shoot(new_enn.x, new_enn.y)
	end
end

function e_shoot(ex, ey)
 print(ex)
	new_eb = {
			x=ex,
			y=ey
		}
	add(enn_b, new_eb)
end

function update_e()
	update_eb()
end

function update_eb()
	for b in all(enn_b) do
	 print(b.y)
		b.y+=3
		
		if (coll(b,p)) p.hp-=1
	end
end
-->8
-- collision --

function coll(a,b)
	 if a.x > b.x + 8
  or a.y > b.y + 8
  or a.x + 8 < b.x
  or a.y + 8 < b.y then
    return false
  else
    return true
  end
end
__gfx__
00000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000f00f000004440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000f00f000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000003003000004440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000033333300000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000033333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000a00a000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000b00b000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009009000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100002d0502a050270501f0501b0501805014050100500b050080501200011000100000e0000d0000c0000c0000c0000b0001d000000000400009000100000200028000320000000000000000000000000000
000200002d0502a050270501f0501b0501805014050100500b050080501200011000100000e0000d0000c0000c0000c0000b0001d000000000400009000100000200028000320000000000000000000000000000
